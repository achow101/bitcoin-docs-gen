<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bitcoin Core: TxConfirmStats Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bitcoin_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin Core
   &#160;<span id="projectnumber">0.16.99</span>
   </div>
   <div id="projectbrief">P2P Digital Currency</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_tx_confirm_stats-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TxConfirmStats Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>We will instantiate an instance of this class to track transactions that were included in a block.  
 <a href="class_tx_confirm_stats.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a22db235d9ecd68a25381f2eaf2f370ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a22db235d9ecd68a25381f2eaf2f370ef">TxConfirmStats</a> (const std::vector&lt; double &gt; &amp;defaultBuckets, const std::map&lt; double, unsigned int &gt; &amp;defaultBucketMap, unsigned int maxPeriods, double <a class="el" href="class_tx_confirm_stats.html#a61076f7531b27abbd85ec8bc7bc90ee2">decay</a>, unsigned int <a class="el" href="class_tx_confirm_stats.html#a569ee57e6788fe9a3d249a6f8bb5059d">scale</a>)</td></tr>
<tr class="memdesc:a22db235d9ecd68a25381f2eaf2f370ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create new <a class="el" href="class_tx_confirm_stats.html" title="We will instantiate an instance of this class to track transactions that were included in a block...">TxConfirmStats</a>.  <a href="#a22db235d9ecd68a25381f2eaf2f370ef">More...</a><br /></td></tr>
<tr class="separator:a22db235d9ecd68a25381f2eaf2f370ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf61e975c43103bb2c1e5ac3f5b3cf8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a3cf61e975c43103bb2c1e5ac3f5b3cf8">ClearCurrent</a> (unsigned int nBlockHeight)</td></tr>
<tr class="memdesc:a3cf61e975c43103bb2c1e5ac3f5b3cf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Roll the circular buffer for unconfirmed txs.  <a href="#a3cf61e975c43103bb2c1e5ac3f5b3cf8">More...</a><br /></td></tr>
<tr class="separator:a3cf61e975c43103bb2c1e5ac3f5b3cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64281208674a51e15fb10a619bde2a51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a64281208674a51e15fb10a619bde2a51">Record</a> (int blocksToConfirm, double val)</td></tr>
<tr class="memdesc:a64281208674a51e15fb10a619bde2a51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a new transaction data point in the current block stats.  <a href="#a64281208674a51e15fb10a619bde2a51">More...</a><br /></td></tr>
<tr class="separator:a64281208674a51e15fb10a619bde2a51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0b014c40cdf3c2207f2677774000261"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#ae0b014c40cdf3c2207f2677774000261">NewTx</a> (unsigned int nBlockHeight, double val)</td></tr>
<tr class="memdesc:ae0b014c40cdf3c2207f2677774000261"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a new transaction entering the mempool.  <a href="#ae0b014c40cdf3c2207f2677774000261">More...</a><br /></td></tr>
<tr class="separator:ae0b014c40cdf3c2207f2677774000261"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e62ef8e55899f2894c864c2221de3db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a0e62ef8e55899f2894c864c2221de3db">removeTx</a> (unsigned int entryHeight, unsigned int nBestSeenHeight, unsigned int bucketIndex, bool inBlock)</td></tr>
<tr class="memdesc:a0e62ef8e55899f2894c864c2221de3db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a transaction from mempool tracking stats.  <a href="#a0e62ef8e55899f2894c864c2221de3db">More...</a><br /></td></tr>
<tr class="separator:a0e62ef8e55899f2894c864c2221de3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96211021e0e019a566a2126948861ead"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a96211021e0e019a566a2126948861ead">UpdateMovingAverages</a> ()</td></tr>
<tr class="memdesc:a96211021e0e019a566a2126948861ead"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update our estimates by decaying our historical moving average and updating with the data gathered from the current block.  <a href="#a96211021e0e019a566a2126948861ead">More...</a><br /></td></tr>
<tr class="separator:a96211021e0e019a566a2126948861ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aace5d830fdfac5626e7769dee5fe6f11"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#aace5d830fdfac5626e7769dee5fe6f11">EstimateMedianVal</a> (int confTarget, double sufficientTxVal, double minSuccess, bool requireGreater, unsigned int nBlockHeight, <a class="el" href="struct_estimation_result.html">EstimationResult</a> *result=nullptr) const</td></tr>
<tr class="memdesc:aace5d830fdfac5626e7769dee5fe6f11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate a feerate estimate.  <a href="#aace5d830fdfac5626e7769dee5fe6f11">More...</a><br /></td></tr>
<tr class="separator:aace5d830fdfac5626e7769dee5fe6f11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b67526e2ceea1b81d8669e3faf6a42"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a34b67526e2ceea1b81d8669e3faf6a42">GetMaxConfirms</a> () const</td></tr>
<tr class="memdesc:a34b67526e2ceea1b81d8669e3faf6a42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the max number of confirms we're tracking.  <a href="#a34b67526e2ceea1b81d8669e3faf6a42">More...</a><br /></td></tr>
<tr class="separator:a34b67526e2ceea1b81d8669e3faf6a42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aacab502acae6b278ede7c68c168dc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a8aacab502acae6b278ede7c68c168dc8">Write</a> (<a class="el" href="class_c_auto_file.html">CAutoFile</a> &amp;fileout) const</td></tr>
<tr class="memdesc:a8aacab502acae6b278ede7c68c168dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write state of estimation data to a file.  <a href="#a8aacab502acae6b278ede7c68c168dc8">More...</a><br /></td></tr>
<tr class="separator:a8aacab502acae6b278ede7c68c168dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad48b69a4f07b3f4be84e2c8ebf1f5116"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#ad48b69a4f07b3f4be84e2c8ebf1f5116">Read</a> (<a class="el" href="class_c_auto_file.html">CAutoFile</a> &amp;filein, int nFileVersion, size_t numBuckets)</td></tr>
<tr class="memdesc:ad48b69a4f07b3f4be84e2c8ebf1f5116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read saved state of estimation data from a file and replace all internal data structures and variables with this state.  <a href="#ad48b69a4f07b3f4be84e2c8ebf1f5116">More...</a><br /></td></tr>
<tr class="separator:ad48b69a4f07b3f4be84e2c8ebf1f5116"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a69c19a46e242cf941584c9f802cbdce2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a69c19a46e242cf941584c9f802cbdce2">resizeInMemoryCounters</a> (size_t newbuckets)</td></tr>
<tr class="separator:a69c19a46e242cf941584c9f802cbdce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa97acc15fbf108af2544958765ebd9b2"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; double &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#aa97acc15fbf108af2544958765ebd9b2">buckets</a></td></tr>
<tr class="separator:aa97acc15fbf108af2544958765ebd9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3b8f4272acfd64b9243f444a124823e"><td class="memItemLeft" align="right" valign="top">const std::map&lt; double, unsigned int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#aa3b8f4272acfd64b9243f444a124823e">bucketMap</a></td></tr>
<tr class="separator:aa3b8f4272acfd64b9243f444a124823e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d09b27bc31a4f7ce4a8104d61546d37"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a6d09b27bc31a4f7ce4a8104d61546d37">txCtAvg</a></td></tr>
<tr class="separator:a6d09b27bc31a4f7ce4a8104d61546d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab09c024915718a928764b2a6b69f8215"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#ab09c024915718a928764b2a6b69f8215">confAvg</a></td></tr>
<tr class="separator:ab09c024915718a928764b2a6b69f8215"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e96a16f53676ba11a49da19a889d71"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a15e96a16f53676ba11a49da19a889d71">failAvg</a></td></tr>
<tr class="separator:a15e96a16f53676ba11a49da19a889d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad7cdbbb2fccfe1abf2dbfb2cc0230ce"><td class="memItemLeft" align="right" valign="top">std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#aad7cdbbb2fccfe1abf2dbfb2cc0230ce">avg</a></td></tr>
<tr class="separator:aad7cdbbb2fccfe1abf2dbfb2cc0230ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61076f7531b27abbd85ec8bc7bc90ee2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a61076f7531b27abbd85ec8bc7bc90ee2">decay</a></td></tr>
<tr class="separator:a61076f7531b27abbd85ec8bc7bc90ee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a569ee57e6788fe9a3d249a6f8bb5059d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a569ee57e6788fe9a3d249a6f8bb5059d">scale</a></td></tr>
<tr class="separator:a569ee57e6788fe9a3d249a6f8bb5059d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80a5b84994e90d568f798632a510ab3"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#ab80a5b84994e90d568f798632a510ab3">unconfTxs</a></td></tr>
<tr class="separator:ab80a5b84994e90d568f798632a510ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80101a37c91a8953151d0c146bfbc635"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tx_confirm_stats.html#a80101a37c91a8953151d0c146bfbc635">oldUnconfTxs</a></td></tr>
<tr class="separator:a80101a37c91a8953151d0c146bfbc635"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>We will instantiate an instance of this class to track transactions that were included in a block. </p>
<p>We will lump transactions into a bucket according to their approximate feerate and then track how long it took for those txs to be included in a block</p>
<p>The tracking of unconfirmed (mempool) transactions is completely independent of the historical tracking of transactions that have been confirmed in a block. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00072">72</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a22db235d9ecd68a25381f2eaf2f370ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22db235d9ecd68a25381f2eaf2f370ef">&#9670;&nbsp;</a></span>TxConfirmStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TxConfirmStats::TxConfirmStats </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>defaultBuckets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; double, unsigned int &gt; &amp;&#160;</td>
          <td class="paramname"><em>defaultBucketMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>maxPeriods</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>decay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create new <a class="el" href="class_tx_confirm_stats.html" title="We will instantiate an instance of this class to track transactions that were included in a block...">TxConfirmStats</a>. </p>
<p>This is called by BlockPolicyEstimator's constructor with default values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">defaultBuckets</td><td>contains the upper limits for the bucket boundaries </td></tr>
    <tr><td class="paramname">maxPeriods</td><td>max number of periods to track </td></tr>
    <tr><td class="paramname">decay</td><td>how much to decay the historical moving average per block </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00175">175</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_a22db235d9ecd68a25381f2eaf2f370ef_cgraph.svg" width="880" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3cf61e975c43103bb2c1e5ac3f5b3cf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf61e975c43103bb2c1e5ac3f5b3cf8">&#9670;&nbsp;</a></span>ClearCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxConfirmStats::ClearCurrent </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nBlockHeight</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Roll the circular buffer for unconfirmed txs. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00208">208</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="aace5d830fdfac5626e7769dee5fe6f11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aace5d830fdfac5626e7769dee5fe6f11">&#9670;&nbsp;</a></span>EstimateMedianVal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double TxConfirmStats::EstimateMedianVal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>confTarget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sufficientTxVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>minSuccess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>requireGreater</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nBlockHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_estimation_result.html">EstimationResult</a> *&#160;</td>
          <td class="paramname"><em>result</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate a feerate estimate. </p>
<p>Find the lowest value bucket (or range of buckets to make sure we have enough data points) whose transactions still have sufficient likelihood of being confirmed within the target number of confirmations </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">confTarget</td><td>target number of confirmations </td></tr>
    <tr><td class="paramname">sufficientTxVal</td><td>required average number of transactions per block in a bucket range </td></tr>
    <tr><td class="paramname">minSuccess</td><td>the success probability we require </td></tr>
    <tr><td class="paramname">requireGreater</td><td>return the lowest feerate such that all higher values pass minSuccess OR return the highest feerate such that all lower values fail minSuccess </td></tr>
    <tr><td class="paramname">nBlockHeight</td><td>the current block height </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00244">244</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_aace5d830fdfac5626e7769dee5fe6f11_cgraph.svg" width="872" height="122"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_aace5d830fdfac5626e7769dee5fe6f11_icgraph.svg" width="596" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a34b67526e2ceea1b81d8669e3faf6a42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b67526e2ceea1b81d8669e3faf6a42">&#9670;&nbsp;</a></span>GetMaxConfirms()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TxConfirmStats::GetMaxConfirms </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the max number of confirms we're tracking. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00162">162</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_a34b67526e2ceea1b81d8669e3faf6a42_cgraph.svg" width="650" height="122"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_a34b67526e2ceea1b81d8669e3faf6a42_icgraph.svg" width="891" height="199"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ae0b014c40cdf3c2207f2677774000261"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0b014c40cdf3c2207f2677774000261">&#9670;&nbsp;</a></span>NewTx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TxConfirmStats::NewTx </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nBlockHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record a new transaction entering the mempool. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00462">462</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="ad48b69a4f07b3f4be84e2c8ebf1f5116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad48b69a4f07b3f4be84e2c8ebf1f5116">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxConfirmStats::Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_auto_file.html">CAutoFile</a> &amp;&#160;</td>
          <td class="paramname"><em>filein</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nFileVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>numBuckets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read saved state of estimation data from a file and replace all internal data structures and variables with this state. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00406">406</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_ad48b69a4f07b3f4be84e2c8ebf1f5116_cgraph.svg" width="851" height="75"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_ad48b69a4f07b3f4be84e2c8ebf1f5116_icgraph.svg" width="1092" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a64281208674a51e15fb10a619bde2a51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64281208674a51e15fb10a619bde2a51">&#9670;&nbsp;</a></span>Record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxConfirmStats::Record </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blocksToConfirm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record a new transaction data point in the current block stats. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blocksToConfirm</td><td>the number of blocks it took this transaction to confirm </td></tr>
    <tr><td class="paramname">val</td><td>the feerate of the transaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>blocksToConfirm is 1-based and has to be &gt;= 1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00217">217</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a0e62ef8e55899f2894c864c2221de3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e62ef8e55899f2894c864c2221de3db">&#9670;&nbsp;</a></span>removeTx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxConfirmStats::removeTx </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>entryHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nBestSeenHeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bucketIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>inBlock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a transaction from mempool tracking stats. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00470">470</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a69c19a46e242cf941584c9f802cbdce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69c19a46e242cf941584c9f802cbdce2">&#9670;&nbsp;</a></span>resizeInMemoryCounters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TxConfirmStats::resizeInMemoryCounters </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>newbuckets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00198">198</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_a69c19a46e242cf941584c9f802cbdce2_cgraph.svg" width="650" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_a69c19a46e242cf941584c9f802cbdce2_icgraph.svg" width="1312" height="136"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a96211021e0e019a566a2126948861ead"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96211021e0e019a566a2126948861ead">&#9670;&nbsp;</a></span>UpdateMovingAverages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxConfirmStats::UpdateMovingAverages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update our estimates by decaying our historical moving average and updating with the data gathered from the current block. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00231">231</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a8aacab502acae6b278ede7c68c168dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aacab502acae6b278ede7c68c168dc8">&#9670;&nbsp;</a></span>Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TxConfirmStats::Write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_auto_file.html">CAutoFile</a> &amp;&#160;</td>
          <td class="paramname"><em>fileout</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write state of estimation data to a file. </p>

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00396">396</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_tx_confirm_stats_a8aacab502acae6b278ede7c68c168dc8_icgraph.svg" width="1092" height="199"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aad7cdbbb2fccfe1abf2dbfb2cc0230ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad7cdbbb2fccfe1abf2dbfb2cc0230ce">&#9670;&nbsp;</a></span>avg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; TxConfirmStats::avg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00094">94</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="aa3b8f4272acfd64b9243f444a124823e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3b8f4272acfd64b9243f444a124823e">&#9670;&nbsp;</a></span>bucketMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::map&lt;double, unsigned int&gt;&amp; TxConfirmStats::bucketMap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00077">77</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="aa97acc15fbf108af2544958765ebd9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa97acc15fbf108af2544958765ebd9b2">&#9670;&nbsp;</a></span>buckets</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;double&gt;&amp; TxConfirmStats::buckets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00076">76</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="ab09c024915718a928764b2a6b69f8215"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab09c024915718a928764b2a6b69f8215">&#9670;&nbsp;</a></span>confAvg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;double&gt; &gt; TxConfirmStats::confAvg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00086">86</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a61076f7531b27abbd85ec8bc7bc90ee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61076f7531b27abbd85ec8bc7bc90ee2">&#9670;&nbsp;</a></span>decay</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double TxConfirmStats::decay</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00099">99</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a15e96a16f53676ba11a49da19a889d71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15e96a16f53676ba11a49da19a889d71">&#9670;&nbsp;</a></span>failAvg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;double&gt; &gt; TxConfirmStats::failAvg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00090">90</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a80101a37c91a8953151d0c146bfbc635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80101a37c91a8953151d0c146bfbc635">&#9670;&nbsp;</a></span>oldUnconfTxs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; TxConfirmStats::oldUnconfTxs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00109">109</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a569ee57e6788fe9a3d249a6f8bb5059d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a569ee57e6788fe9a3d249a6f8bb5059d">&#9670;&nbsp;</a></span>scale</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TxConfirmStats::scale</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00102">102</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="a6d09b27bc31a4f7ce4a8104d61546d37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d09b27bc31a4f7ce4a8104d61546d37">&#9670;&nbsp;</a></span>txCtAvg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;double&gt; TxConfirmStats::txCtAvg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00082">82</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<a id="ab80a5b84994e90d568f798632a510ab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab80a5b84994e90d568f798632a510ab3">&#9670;&nbsp;</a></span>unconfTxs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;int&gt; &gt; TxConfirmStats::unconfTxs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="policy_2fees_8cpp_source.html#l00107">107</a> of file <a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/policy/<a class="el" href="policy_2fees_8cpp_source.html">fees.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 30 2018 14:26:36 for Bitcoin Core by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
