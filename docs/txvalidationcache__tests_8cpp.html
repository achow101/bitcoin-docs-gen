<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bitcoin Core: src/test/txvalidationcache_tests.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bitcoin_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin Core<span id="projectnumber">&#160;22.99.0</span>
   </div>
   <div id="projectbrief">P2P Digital Currency</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_120ed4da3e3217b1e7fc0b4f48568e79.html">test</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">txvalidationcache_tests.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="consensus_2validation_8h_source.html">consensus/validation.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="key_8h_source.html">key.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sign_8h_source.html">script/sign.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="signingprovider_8h_source.html">script/signingprovider.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="standard_8h_source.html">script/standard.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="setup__common_8h_source.html">test/util/setup_common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="txmempool_8h_source.html">txmempool.h</a>&gt;</code><br />
<code>#include &lt;validation.h&gt;</code><br />
<code>#include &lt;boost/test/unit_test.hpp&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for txvalidationcache_tests.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="txvalidationcache__tests_8cpp__incl.svg" width="3572" height="814"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div>
<p><a href="txvalidationcache__tests_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_dersig100_setup.html">Dersig100Setup</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a038a1c1ba6a5411fd59c8ac5c0935d7d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txvalidationcache__tests_8cpp.html#a038a1c1ba6a5411fd59c8ac5c0935d7d">CheckInputScripts</a> (const <a class="el" href="class_c_transaction.html">CTransaction</a> &amp;tx, <a class="el" href="class_tx_validation_state.html">TxValidationState</a> &amp;state, const <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;inputs, unsigned int <a class="el" href="bitcoin-tx_8cpp.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>, bool cacheSigStore, bool cacheFullScriptStore, <a class="el" href="struct_precomputed_transaction_data.html">PrecomputedTransactionData</a> &amp;txdata, std::vector&lt; <a class="el" href="class_c_script_check.html">CScriptCheck</a> &gt; *pvChecks) <a class="el" href="threadsafety_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memdesc:a038a1c1ba6a5411fd59c8ac5c0935d7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether all of this transaction's input scripts succeed.  <a href="txvalidationcache__tests_8cpp.html#a038a1c1ba6a5411fd59c8ac5c0935d7d">More...</a><br /></td></tr>
<tr class="separator:a038a1c1ba6a5411fd59c8ac5c0935d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ad149e00d827fbbe731dde7852fe4c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txvalidationcache__tests_8cpp.html#a0ad149e00d827fbbe731dde7852fe4c8">BOOST_FIXTURE_TEST_CASE</a> (tx_mempool_block_doublespend, <a class="el" href="struct_dersig100_setup.html">Dersig100Setup</a>)</td></tr>
<tr class="separator:a0ad149e00d827fbbe731dde7852fe4c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b295f065fe129ee799cc9b368ea2fd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txvalidationcache__tests_8cpp.html#a46b295f065fe129ee799cc9b368ea2fd">ValidateCheckInputsForAllFlags</a> (const <a class="el" href="class_c_transaction.html">CTransaction</a> &amp;tx, uint32_t failing_flags, bool add_to_cache, <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;active_coins_tip) <a class="el" href="threadsafety_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(<a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="separator:a46b295f065fe129ee799cc9b368ea2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cede32905e27934cd347c1455ae477b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="txvalidationcache__tests_8cpp.html#a0cede32905e27934cd347c1455ae477b">BOOST_FIXTURE_TEST_CASE</a> (checkinputs_test, <a class="el" href="struct_dersig100_setup.html">Dersig100Setup</a>)</td></tr>
<tr class="separator:a0cede32905e27934cd347c1455ae477b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0cede32905e27934cd347c1455ae477b" name="a0cede32905e27934cd347c1455ae477b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cede32905e27934cd347c1455ae477b">&#9670;&nbsp;</a></span>BOOST_FIXTURE_TEST_CASE() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_FIXTURE_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">checkinputs_test&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_dersig100_setup.html">Dersig100Setup</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="txvalidationcache__tests_8cpp_source.html#l00161">161</a> of file <a class="el" href="txvalidationcache__tests_8cpp_source.html">txvalidationcache_tests.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="txvalidationcache__tests_8cpp_a0cede32905e27934cd347c1455ae477b_cgraph.svg" width="1575" height="1779"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0ad149e00d827fbbe731dde7852fe4c8" name="a0ad149e00d827fbbe731dde7852fe4c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ad149e00d827fbbe731dde7852fe4c8">&#9670;&nbsp;</a></span>BOOST_FIXTURE_TEST_CASE() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOST_FIXTURE_TEST_CASE </td>
          <td>(</td>
          <td class="paramtype">tx_mempool_block_doublespend&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_dersig100_setup.html">Dersig100Setup</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="txvalidationcache__tests_8cpp_source.html#l00028">28</a> of file <a class="el" href="txvalidationcache__tests_8cpp_source.html">txvalidationcache_tests.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="txvalidationcache__tests_8cpp_a0ad149e00d827fbbe731dde7852fe4c8_cgraph.svg" width="1666" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a038a1c1ba6a5411fd59c8ac5c0935d7d" name="a038a1c1ba6a5411fd59c8ac5c0935d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a038a1c1ba6a5411fd59c8ac5c0935d7d">&#9670;&nbsp;</a></span>CheckInputScripts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CheckInputScripts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_transaction.html">CTransaction</a> &amp;&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tx_validation_state.html">TxValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cacheSigStore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cacheFullScriptStore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_precomputed_transaction_data.html">PrecomputedTransactionData</a> &amp;&#160;</td>
          <td class="paramname"><em>txdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="class_c_script_check.html">CScriptCheck</a> &gt; *&#160;</td>
          <td class="paramname"><em>pvChecks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether all of this transaction's input scripts succeed. </p>
<p >This involves ECDSA signature checks so can be computationally intensive. This function should only be called after the cheap sanity checks in CheckTxInputs passed.</p>
<p >If pvChecks is not nullptr, script checks are pushed onto it instead of being performed inline. Any script checks which are not necessary (eg due to script execution cache hits) are, obviously, not pushed onto pvChecks/run.</p>
<p >Setting cacheSigStore/cacheFullScriptStore to false will remove elements from the corresponding cache which are matched. This is useful for checking blocks where we will likely never need the cache entry again.</p>
<p >Note that we may set state.reason to NOT_STANDARD for extra soft-fork flags in flags, block-checking callers should probably reset it to CONSENSUS in such cases.</p>
<p >Non-static (and re-declared) in <a class="el" href="txvalidationcache__tests_8cpp.html">src/test/txvalidationcache_tests.cpp</a> </p>

<p class="definition">Definition at line <a class="el" href="validation_8cpp_source.html#l01291">1291</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="txvalidationcache__tests_8cpp_a038a1c1ba6a5411fd59c8ac5c0935d7d_cgraph.svg" width="2044" height="712"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="txvalidationcache__tests_8cpp_a038a1c1ba6a5411fd59c8ac5c0935d7d_icgraph.svg" width="2668" height="658"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a46b295f065fe129ee799cc9b368ea2fd" name="a46b295f065fe129ee799cc9b368ea2fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46b295f065fe129ee799cc9b368ea2fd">&#9670;&nbsp;</a></span>ValidateCheckInputsForAllFlags()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ValidateCheckInputsForAllFlags </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_transaction.html">CTransaction</a> &amp;&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>failing_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>add_to_cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;&#160;</td>
          <td class="paramname"><em>active_coins_tip</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="txvalidationcache__tests_8cpp_source.html#l00117">117</a> of file <a class="el" href="txvalidationcache__tests_8cpp_source.html">txvalidationcache_tests.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="txvalidationcache__tests_8cpp_a46b295f065fe129ee799cc9b368ea2fd_cgraph.svg" width="2307" height="836"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="txvalidationcache__tests_8cpp_a46b295f065fe129ee799cc9b368ea2fd_icgraph.svg" width="462" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 8 2021 14:20:10 for Bitcoin Core by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
