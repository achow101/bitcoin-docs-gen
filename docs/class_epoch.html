<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bitcoin Core: Epoch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bitcoin_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin Core<span id="projectnumber">&#160;22.99.0</span>
   </div>
   <div id="projectbrief">P2P Digital Currency</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_epoch-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Epoch Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_epoch.html" title="Epoch: RAII-style guard for using epoch-based graph traversal algorithms.">Epoch</a>: RAII-style guard for using epoch-based graph traversal algorithms.  
 <a href="class_epoch.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="epochguard_8h_source.html">epochguard.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch_1_1_guard.html">Guard</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch_1_1_marker.html">Marker</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad46de33bfe392cf702dd03c2b67ef92e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#ad46de33bfe392cf702dd03c2b67ef92e">Epoch</a> ()=default</td></tr>
<tr class="separator:ad46de33bfe392cf702dd03c2b67ef92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1adf1b9c5412e026261e291aca6bb17f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#a1adf1b9c5412e026261e291aca6bb17f">Epoch</a> (const <a class="el" href="class_epoch.html">Epoch</a> &amp;)=delete</td></tr>
<tr class="separator:a1adf1b9c5412e026261e291aca6bb17f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8700f6f9805c1059e621c06aaa6a1fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_epoch.html">Epoch</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#aa8700f6f9805c1059e621c06aaa6a1fc">operator=</a> (const <a class="el" href="class_epoch.html">Epoch</a> &amp;)=delete</td></tr>
<tr class="separator:aa8700f6f9805c1059e621c06aaa6a1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3db0f84f19ce16f3a3c1669bb458ac6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#ad3db0f84f19ce16f3a3c1669bb458ac6">Epoch</a> (<a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:ad3db0f84f19ce16f3a3c1669bb458ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69e456a5cd5d5d5afd5fb958628bb566"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_epoch.html">Epoch</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#a69e456a5cd5d5d5afd5fb958628bb566">operator=</a> (<a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a69e456a5cd5d5d5afd5fb958628bb566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342590f73f0a93a3cbb02e00d4325a92"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#a342590f73f0a93a3cbb02e00d4325a92">~Epoch</a> ()=default</td></tr>
<tr class="separator:a342590f73f0a93a3cbb02e00d4325a92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce2c04e5c4775d85b773b8ac147c667"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#a7ce2c04e5c4775d85b773b8ac147c667">guarded</a> () const</td></tr>
<tr class="separator:a7ce2c04e5c4775d85b773b8ac147c667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99cdf687534d79a344b53d422ccd7ec1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#a99cdf687534d79a344b53d422ccd7ec1">visited</a> (<a class="el" href="class_epoch_1_1_marker.html">Marker</a> &amp;marker) const <a class="el" href="threadsafety_8h.html#a0e2e86b0f11d9778240b0a0b263047b1">EXCLUSIVE_LOCKS_REQUIRED</a>(*this)</td></tr>
<tr class="separator:a99cdf687534d79a344b53d422ccd7ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a996dc074f042e49ad960e91cc578a0eb"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#a996dc074f042e49ad960e91cc578a0eb">m_raw_epoch</a> = 0</td></tr>
<tr class="separator:a996dc074f042e49ad960e91cc578a0eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10677fa30d2abf644c16510c1243659c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_epoch.html#a10677fa30d2abf644c16510c1243659c">m_guarded</a> = false</td></tr>
<tr class="separator:a10677fa30d2abf644c16510c1243659c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p ><a class="el" href="class_epoch.html" title="Epoch: RAII-style guard for using epoch-based graph traversal algorithms.">Epoch</a>: RAII-style guard for using epoch-based graph traversal algorithms. </p>
<p >When walking ancestors or descendants, we generally want to avoid visiting the same transactions twice. Some traversal algorithms use std::set (or setEntries) to deduplicate the transaction we visit. However, use of std::set is algorithmically undesirable because it both adds an asymptotic factor of O(log n) to traversals cost and triggers O(n) more dynamic memory allocations. In many algorithms we can replace std::set with an internal mempool counter to track the time (or, "epoch") that we began a traversal, and check + update a per-transaction epoch for each transaction we look at to determine if that transaction has not yet been visited during the current traversal's epoch. Algorithms using std::set can be replaced on a one by one basis. Both techniques are not fundamentally incompatible across the codebase. Generally speaking, however, the remaining use of std::set for mempool traversal should be viewed as a TODO for replacement with an epoch based traversal, rather than a preference for std::set over epochs in that algorithm. </p>

<p class="definition">Definition at line <a class="el" href="epochguard_8h_source.html#l00033">33</a> of file <a class="el" href="epochguard_8h_source.html">epochguard.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad46de33bfe392cf702dd03c2b67ef92e" name="ad46de33bfe392cf702dd03c2b67ef92e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad46de33bfe392cf702dd03c2b67ef92e">&#9670;&nbsp;</a></span>Epoch() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Epoch::Epoch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1adf1b9c5412e026261e291aca6bb17f" name="a1adf1b9c5412e026261e291aca6bb17f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1adf1b9c5412e026261e291aca6bb17f">&#9670;&nbsp;</a></span>Epoch() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Epoch::Epoch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_epoch.html">Epoch</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad3db0f84f19ce16f3a3c1669bb458ac6" name="ad3db0f84f19ce16f3a3c1669bb458ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3db0f84f19ce16f3a3c1669bb458ac6">&#9670;&nbsp;</a></span>Epoch() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Epoch::Epoch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a342590f73f0a93a3cbb02e00d4325a92" name="a342590f73f0a93a3cbb02e00d4325a92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a342590f73f0a93a3cbb02e00d4325a92">&#9670;&nbsp;</a></span>~Epoch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Epoch::~Epoch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7ce2c04e5c4775d85b773b8ac147c667" name="a7ce2c04e5c4775d85b773b8ac147c667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce2c04e5c4775d85b773b8ac147c667">&#9670;&nbsp;</a></span>guarded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Epoch::guarded </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="epochguard_8h_source.html#l00047">47</a> of file <a class="el" href="epochguard_8h_source.html">epochguard.h</a>.</p>

</div>
</div>
<a id="aa8700f6f9805c1059e621c06aaa6a1fc" name="aa8700f6f9805c1059e621c06aaa6a1fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8700f6f9805c1059e621c06aaa6a1fc">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_epoch.html">Epoch</a> &amp; Epoch::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_epoch.html">Epoch</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a69e456a5cd5d5d5afd5fb958628bb566" name="a69e456a5cd5d5d5afd5fb958628bb566"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69e456a5cd5d5d5afd5fb958628bb566">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_epoch.html">Epoch</a> &amp; Epoch::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_epoch.html">Epoch</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a99cdf687534d79a344b53d422ccd7ec1" name="a99cdf687534d79a344b53d422ccd7ec1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99cdf687534d79a344b53d422ccd7ec1">&#9670;&nbsp;</a></span>visited()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Epoch::visited </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_epoch_1_1_marker.html">Marker</a> &amp;&#160;</td>
          <td class="paramname"><em>marker</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="epochguard_8h_source.html#l00086">86</a> of file <a class="el" href="epochguard_8h_source.html">epochguard.h</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_epoch_a99cdf687534d79a344b53d422ccd7ec1_cgraph.svg" width="235" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a10677fa30d2abf644c16510c1243659c" name="a10677fa30d2abf644c16510c1243659c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10677fa30d2abf644c16510c1243659c">&#9670;&nbsp;</a></span>m_guarded</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Epoch::m_guarded = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="epochguard_8h_source.html#l00037">37</a> of file <a class="el" href="epochguard_8h_source.html">epochguard.h</a>.</p>

</div>
</div>
<a id="a996dc074f042e49ad960e91cc578a0eb" name="a996dc074f042e49ad960e91cc578a0eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a996dc074f042e49ad960e91cc578a0eb">&#9670;&nbsp;</a></span>m_raw_epoch</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Epoch::m_raw_epoch = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="epochguard_8h_source.html#l00036">36</a> of file <a class="el" href="epochguard_8h_source.html">epochguard.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/util/<a class="el" href="epochguard_8h_source.html">epochguard.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 8 2021 14:20:11 for Bitcoin Core by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
