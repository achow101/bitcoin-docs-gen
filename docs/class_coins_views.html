<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bitcoin Core: CoinsViews Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bitcoin_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin Core<span id="projectnumber">&#160;22.99.0</span>
   </div>
   <div id="projectbrief">P2P Digital Currency</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_coins_views-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">CoinsViews Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A convenience class for constructing the CCoinsView* hierarchy used to facilitate access to the UTXO set.  
 <a href="class_coins_views.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="validation_8h_source.html">validation.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acba93c4a1f7cb941a6983a8ae675eeb0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_coins_view_d_b.html">CCoinsViewDB</a> m_dbview&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_coins_views.html#acba93c4a1f7cb941a6983a8ae675eeb0">GUARDED_BY</a> (<a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memdesc:acba93c4a1f7cb941a6983a8ae675eeb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The lowest level of the <a class="el" href="class_coins_views.html" title="A convenience class for constructing the CCoinsView* hierarchy used to facilitate access to the UTXO ...">CoinsViews</a> cache hierarchy sits in a leveldb database on disk.  <a href="class_coins_views.html#acba93c4a1f7cb941a6983a8ae675eeb0">More...</a><br /></td></tr>
<tr class="separator:acba93c4a1f7cb941a6983a8ae675eeb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62741f5a3a29f35b0d01e1c6f09dbc09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_coins_view_error_catcher.html">CCoinsViewErrorCatcher</a> m_catcherview&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_coins_views.html#a62741f5a3a29f35b0d01e1c6f09dbc09">GUARDED_BY</a> (<a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memdesc:a62741f5a3a29f35b0d01e1c6f09dbc09"><td class="mdescLeft">&#160;</td><td class="mdescRight">This view wraps access to the leveldb instance and handles read errors gracefully.  <a href="class_coins_views.html#a62741f5a3a29f35b0d01e1c6f09dbc09">More...</a><br /></td></tr>
<tr class="separator:a62741f5a3a29f35b0d01e1c6f09dbc09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9500e72bd4296e5b3dc2aa105407ee"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &gt; m_cacheview&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_coins_views.html#a5e9500e72bd4296e5b3dc2aa105407ee">GUARDED_BY</a> (<a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>)</td></tr>
<tr class="memdesc:a5e9500e72bd4296e5b3dc2aa105407ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the top layer of the cache hierarchy - it keeps as many coins in memory as can fit per the dbcache setting.  <a href="class_coins_views.html#a5e9500e72bd4296e5b3dc2aa105407ee">More...</a><br /></td></tr>
<tr class="separator:a5e9500e72bd4296e5b3dc2aa105407ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04e4c1a978660377f90913e0cb3d33d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_coins_views.html#af04e4c1a978660377f90913e0cb3d33d">CoinsViews</a> (std::string ldb_name, size_t cache_size_bytes, bool in_memory, bool should_wipe)</td></tr>
<tr class="memdesc:af04e4c1a978660377f90913e0cb3d33d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This constructor initializes <a class="el" href="class_c_coins_view_d_b.html" title="CCoinsView backed by the coin database (chainstate/)">CCoinsViewDB</a> and <a class="el" href="class_c_coins_view_error_catcher.html" title="This is a minimally invasive approach to shutdown on LevelDB read errors from the chainstate,...">CCoinsViewErrorCatcher</a> instances, but it <em>does not</em> create a <a class="el" href="class_c_coins_view_cache.html" title="CCoinsView that adds a memory cache for transactions to another CCoinsView.">CCoinsViewCache</a> instance by default.  <a href="class_coins_views.html#af04e4c1a978660377f90913e0cb3d33d">More...</a><br /></td></tr>
<tr class="separator:af04e4c1a978660377f90913e0cb3d33d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A convenience class for constructing the CCoinsView* hierarchy used to facilitate access to the UTXO set. </p>
<p >This class consists of an arrangement of layered <a class="el" href="class_c_coins_view.html" title="Abstract view on the open txout dataset.">CCoinsView</a> objects, preferring to store and retrieve coins in memory via <code>m_cacheview</code> but ultimately falling back on cache misses to the canonical store of UTXOs on disk, <code>m_dbview</code>. </p>

<p class="definition">Definition at line <a class="el" href="validation_8h_source.html#l00494">494</a> of file <a class="el" href="validation_8h_source.html">validation.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af04e4c1a978660377f90913e0cb3d33d" name="af04e4c1a978660377f90913e0cb3d33d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04e4c1a978660377f90913e0cb3d33d">&#9670;&nbsp;</a></span>CoinsViews()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CoinsViews::CoinsViews </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>ldb_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>cache_size_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>in_memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>should_wipe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This constructor initializes <a class="el" href="class_c_coins_view_d_b.html" title="CCoinsView backed by the coin database (chainstate/)">CCoinsViewDB</a> and <a class="el" href="class_c_coins_view_error_catcher.html" title="This is a minimally invasive approach to shutdown on LevelDB read errors from the chainstate,...">CCoinsViewErrorCatcher</a> instances, but it <em>does not</em> create a <a class="el" href="class_c_coins_view_cache.html" title="CCoinsView that adds a memory cache for transactions to another CCoinsView.">CCoinsViewCache</a> instance by default. </p>
<p >This is done separately because the presence of the cache has implications on whether or not we're allowed to flush the cache's state to disk, which should not be done until the health of the database is verified.</p>
<p >All arguments forwarded onto <a class="el" href="class_c_coins_view_d_b.html" title="CCoinsView backed by the coin database (chainstate/)">CCoinsViewDB</a>. </p>

<p class="definition">Definition at line <a class="el" href="validation_8cpp_source.html#l01081">1081</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acba93c4a1f7cb941a6983a8ae675eeb0" name="acba93c4a1f7cb941a6983a8ae675eeb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba93c4a1f7cb941a6983a8ae675eeb0">&#9670;&nbsp;</a></span>GUARDED_BY() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_coins_view_d_b.html">CCoinsViewDB</a> m_dbview CoinsViews::GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The lowest level of the <a class="el" href="class_coins_views.html" title="A convenience class for constructing the CCoinsView* hierarchy used to facilitate access to the UTXO ...">CoinsViews</a> cache hierarchy sits in a leveldb database on disk. </p>
<p >All unspent coins reside in this store. </p>

</div>
</div>
<a id="a62741f5a3a29f35b0d01e1c6f09dbc09" name="a62741f5a3a29f35b0d01e1c6f09dbc09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62741f5a3a29f35b0d01e1c6f09dbc09">&#9670;&nbsp;</a></span>GUARDED_BY() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_coins_view_error_catcher.html">CCoinsViewErrorCatcher</a> m_catcherview CoinsViews::GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This view wraps access to the leveldb instance and handles read errors gracefully. </p>

</div>
</div>
<a id="a5e9500e72bd4296e5b3dc2aa105407ee" name="a5e9500e72bd4296e5b3dc2aa105407ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e9500e72bd4296e5b3dc2aa105407ee">&#9670;&nbsp;</a></span>GUARDED_BY() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &gt; m_cacheview CoinsViews::GUARDED_BY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="validationinterface_8h.html#ab88a4b9173207cf250ece7820db1f36d">cs_main</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the top layer of the cache hierarchy - it keeps as many coins in memory as can fit per the dbcache setting. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="validation_8h_source.html">validation.h</a></li>
<li>src/<a class="el" href="validation_8cpp_source.html">validation.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 8 2021 14:20:11 for Bitcoin Core by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
