<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Bitcoin Core: CChainState Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bitcoin_logo_doxygen.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Bitcoin Core
   &#160;<span id="projectnumber">0.16.99</span>
   </div>
   <div id="projectbrief">P2P Digital Currency</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_c_chain_state-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CChainState Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_c_chain_state.html" title="CChainState stores and provides an API to update our local knowledge of the current best chain and he...">CChainState</a> stores and provides an API to update our local knowledge of the current best chain and header tree.  
 <a href="class_c_chain_state.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for CChainState:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state__coll__graph.svg" width="735" height="339"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3bd618dffc998e987d94f03d45353314"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a3bd618dffc998e987d94f03d45353314">LoadBlockIndex</a> (const <a class="el" href="struct_consensus_1_1_params.html">Consensus::Params</a> &amp;consensus_params, <a class="el" href="class_c_block_tree_d_b.html">CBlockTreeDB</a> &amp;blocktree)</td></tr>
<tr class="separator:a3bd618dffc998e987d94f03d45353314"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a24c6da53ff4b725e2d1c8b4af007fe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a5a24c6da53ff4b725e2d1c8b4af007fe">ActivateBestChain</a> (<a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; pblock)</td></tr>
<tr class="memdesc:a5a24c6da53ff4b725e2d1c8b4af007fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make the best chain active, in multiple steps.  <a href="#a5a24c6da53ff4b725e2d1c8b4af007fe">More...</a><br /></td></tr>
<tr class="separator:a5a24c6da53ff4b725e2d1c8b4af007fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a059db2048ce030760838426613dfc3e7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a059db2048ce030760838426613dfc3e7">AcceptBlockHeader</a> (const <a class="el" href="class_c_block_header.html">CBlockHeader</a> &amp;block, <a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, <a class="el" href="class_c_block_index.html">CBlockIndex</a> **ppindex)</td></tr>
<tr class="memdesc:a059db2048ce030760838426613dfc3e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a block header hasn't already been seen, call CheckBlockHeader on it, ensure that it doesn't descend from an invalid block, and then add it to mapBlockIndex.  <a href="#a059db2048ce030760838426613dfc3e7">More...</a><br /></td></tr>
<tr class="separator:a059db2048ce030760838426613dfc3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4c089f033fefc9f5e10cda9af6a3a9a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#ae4c089f033fefc9f5e10cda9af6a3a9a">AcceptBlock</a> (const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;pblock, <a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, <a class="el" href="class_c_block_index.html">CBlockIndex</a> **ppindex, bool fRequested, const <a class="el" href="struct_c_disk_block_pos.html">CDiskBlockPos</a> *dbp, bool *fNewBlock)</td></tr>
<tr class="memdesc:ae4c089f033fefc9f5e10cda9af6a3a9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store block on disk.  <a href="#ae4c089f033fefc9f5e10cda9af6a3a9a">More...</a><br /></td></tr>
<tr class="separator:ae4c089f033fefc9f5e10cda9af6a3a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c2802e12d40109c2189bfa8a5e0e8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="validation_8cpp.html#aeaef80b01ee5387f474a63ed23c9cc50">DisconnectResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a84c2802e12d40109c2189bfa8a5e0e8f">DisconnectBlock</a> (const <a class="el" href="class_c_block.html">CBlock</a> &amp;block, const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;view)</td></tr>
<tr class="memdesc:a84c2802e12d40109c2189bfa8a5e0e8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undo the effects of this block (with given index) on the UTXO set represented by coins.  <a href="#a84c2802e12d40109c2189bfa8a5e0e8f">More...</a><br /></td></tr>
<tr class="separator:a84c2802e12d40109c2189bfa8a5e0e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0c017d41977fe6552ecfd1fc7c887d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a6c0c017d41977fe6552ecfd1fc7c887d">ConnectBlock</a> (const <a class="el" href="class_c_block.html">CBlock</a> &amp;block, <a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;view, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, bool fJustCheck=false)</td></tr>
<tr class="memdesc:a6c0c017d41977fe6552ecfd1fc7c887d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the effects of this block (with given index) on the UTXO set represented by coins.  <a href="#a6c0c017d41977fe6552ecfd1fc7c887d">More...</a><br /></td></tr>
<tr class="separator:a6c0c017d41977fe6552ecfd1fc7c887d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57682556dc35715fba5f0c6075efcc6e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a57682556dc35715fba5f0c6075efcc6e">DisconnectTip</a> (<a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, <a class="el" href="struct_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> *disconnectpool)</td></tr>
<tr class="memdesc:a57682556dc35715fba5f0c6075efcc6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect chainActive's tip.  <a href="#a57682556dc35715fba5f0c6075efcc6e">More...</a><br /></td></tr>
<tr class="separator:a57682556dc35715fba5f0c6075efcc6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e55c3c2a30535273288ae68fdfcac88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a9e55c3c2a30535273288ae68fdfcac88">PreciousBlock</a> (<a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;params, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex)</td></tr>
<tr class="separator:a9e55c3c2a30535273288ae68fdfcac88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656ebb0e37670a16714f0be1c572468b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a656ebb0e37670a16714f0be1c572468b">InvalidateBlock</a> (<a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex)</td></tr>
<tr class="separator:a656ebb0e37670a16714f0be1c572468b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed855ca1761c2176651c8082aa9f529"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a7ed855ca1761c2176651c8082aa9f529">ResetBlockFailureFlags</a> (<a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex)</td></tr>
<tr class="separator:a7ed855ca1761c2176651c8082aa9f529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219bb793d4d3b0a095ccc47c45bc5b83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a219bb793d4d3b0a095ccc47c45bc5b83">ReplayBlocks</a> (const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;params, <a class="el" href="class_c_coins_view.html">CCoinsView</a> *view)</td></tr>
<tr class="separator:a219bb793d4d3b0a095ccc47c45bc5b83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0586502e4dd4092c4a0707d329f6eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#afc0586502e4dd4092c4a0707d329f6eb">RewindBlockIndex</a> (const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;params)</td></tr>
<tr class="separator:afc0586502e4dd4092c4a0707d329f6eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6beb735dce3a8f0182660c04789df961"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a6beb735dce3a8f0182660c04789df961">LoadGenesisBlock</a> (const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams)</td></tr>
<tr class="separator:a6beb735dce3a8f0182660c04789df961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c5ba911dca1f0d59781b9e63a607cd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a6c5ba911dca1f0d59781b9e63a607cd6">PruneBlockIndexCandidates</a> ()</td></tr>
<tr class="memdesc:a6c5ba911dca1f0d59781b9e63a607cd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete all entries in setBlockIndexCandidates that are worse than the current tip.  <a href="#a6c5ba911dca1f0d59781b9e63a607cd6">More...</a><br /></td></tr>
<tr class="separator:a6c5ba911dca1f0d59781b9e63a607cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a807d9f23f63726267a1c62bf9c9eecef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a807d9f23f63726267a1c62bf9c9eecef">UnloadBlockIndex</a> ()</td></tr>
<tr class="separator:a807d9f23f63726267a1c62bf9c9eecef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a9b1419f91f5e56c7d4db775526c14e0d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_chain.html">CChain</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a9b1419f91f5e56c7d4db775526c14e0d">chainActive</a></td></tr>
<tr class="separator:a9b1419f91f5e56c7d4db775526c14e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95e2cf108ec02553707ae715b3acf0ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="validation_8h.html#a6b962fe256607627c8140021ae7a23e1">BlockMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a95e2cf108ec02553707ae715b3acf0ee">mapBlockIndex</a></td></tr>
<tr class="separator:a95e2cf108ec02553707ae715b3acf0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318040c11336b79eddc71e1d3b176f2a"><td class="memItemLeft" align="right" valign="top">std::multimap&lt; <a class="el" href="class_c_block_index.html">CBlockIndex</a> *, <a class="el" href="class_c_block_index.html">CBlockIndex</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a318040c11336b79eddc71e1d3b176f2a">mapBlocksUnlinked</a></td></tr>
<tr class="separator:a318040c11336b79eddc71e1d3b176f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0ae491f2e6b031587a5ad35fdafe546"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#ae0ae491f2e6b031587a5ad35fdafe546">pindexBestInvalid</a> = nullptr</td></tr>
<tr class="separator:ae0ae491f2e6b031587a5ad35fdafe546"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a14d226df8dd7502d039f98b58f1534d4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a14d226df8dd7502d039f98b58f1534d4">ActivateBestChainStep</a> (<a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindexMostWork, const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;pblock, bool &amp;fInvalidFound, <a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;connectTrace)</td></tr>
<tr class="memdesc:a14d226df8dd7502d039f98b58f1534d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to make some progress towards making pindexMostWork the active block.  <a href="#a14d226df8dd7502d039f98b58f1534d4">More...</a><br /></td></tr>
<tr class="separator:a14d226df8dd7502d039f98b58f1534d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b8212270ad8b00cc1daad6f38623654"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a7b8212270ad8b00cc1daad6f38623654">ConnectTip</a> (<a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;chainparams, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindexNew, const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;pblock, <a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;connectTrace, <a class="el" href="struct_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> &amp;disconnectpool)</td></tr>
<tr class="memdesc:a7b8212270ad8b00cc1daad6f38623654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect a new block to chainActive.  <a href="#a7b8212270ad8b00cc1daad6f38623654">More...</a><br /></td></tr>
<tr class="separator:a7b8212270ad8b00cc1daad6f38623654"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac45520cdaf73168c6ae16ec81c166b5b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#ac45520cdaf73168c6ae16ec81c166b5b">AddToBlockIndex</a> (const <a class="el" href="class_c_block_header.html">CBlockHeader</a> &amp;block)</td></tr>
<tr class="separator:ac45520cdaf73168c6ae16ec81c166b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec6306c9d32c3652dd68503e3ef838bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#aec6306c9d32c3652dd68503e3ef838bc">InsertBlockIndex</a> (const <a class="el" href="classuint256.html">uint256</a> &amp;hash)</td></tr>
<tr class="memdesc:aec6306c9d32c3652dd68503e3ef838bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new block index entry for a given block hash.  <a href="#aec6306c9d32c3652dd68503e3ef838bc">More...</a><br /></td></tr>
<tr class="separator:aec6306c9d32c3652dd68503e3ef838bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48cfb3ace8393f98f940b02876377f97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a48cfb3ace8393f98f940b02876377f97">CheckBlockIndex</a> (const <a class="el" href="struct_consensus_1_1_params.html">Consensus::Params</a> &amp;consensusParams)</td></tr>
<tr class="memdesc:a48cfb3ace8393f98f940b02876377f97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make various assertions about the state of the block index.  <a href="#a48cfb3ace8393f98f940b02876377f97">More...</a><br /></td></tr>
<tr class="separator:a48cfb3ace8393f98f940b02876377f97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0087944413aa4c30c7ef1644a1ad9f3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a0087944413aa4c30c7ef1644a1ad9f3a">InvalidBlockFound</a> (<a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, const <a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;state)</td></tr>
<tr class="separator:a0087944413aa4c30c7ef1644a1ad9f3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88336990c447e935c05777f4b2cfb3ff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a88336990c447e935c05777f4b2cfb3ff">FindMostWorkChain</a> ()</td></tr>
<tr class="memdesc:a88336990c447e935c05777f4b2cfb3ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the tip of the chain with the most work in it, that isn't known to be invalid (it's however far from certain to be valid).  <a href="#a88336990c447e935c05777f4b2cfb3ff">More...</a><br /></td></tr>
<tr class="separator:a88336990c447e935c05777f4b2cfb3ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada9f4af419d471de210cca765a36424e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#ada9f4af419d471de210cca765a36424e">ReceivedBlockTransactions</a> (const <a class="el" href="class_c_block.html">CBlock</a> &amp;block, <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindexNew, const <a class="el" href="struct_c_disk_block_pos.html">CDiskBlockPos</a> &amp;pos, const <a class="el" href="struct_consensus_1_1_params.html">Consensus::Params</a> &amp;consensusParams)</td></tr>
<tr class="memdesc:ada9f4af419d471de210cca765a36424e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a block as having its data received and checked (up to BLOCK_VALID_TRANSACTIONS).  <a href="#ada9f4af419d471de210cca765a36424e">More...</a><br /></td></tr>
<tr class="separator:ada9f4af419d471de210cca765a36424e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6a93bf81626b263deef801883f7abc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a8a6a93bf81626b263deef801883f7abc">RollforwardBlock</a> (const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *pindex, <a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;inputs, const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;params)</td></tr>
<tr class="memdesc:a8a6a93bf81626b263deef801883f7abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the effects of a block on the utxo cache, ignoring that it may already have been applied.  <a href="#a8a6a93bf81626b263deef801883f7abc">More...</a><br /></td></tr>
<tr class="separator:a8a6a93bf81626b263deef801883f7abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a528c14be4a2a7c6837a2d099b2ad7ef7"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="class_c_block_index.html">CBlockIndex</a> *, CBlockIndexWorkComparator &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a528c14be4a2a7c6837a2d099b2ad7ef7">setBlockIndexCandidates</a></td></tr>
<tr class="memdesc:a528c14be4a2a7c6837a2d099b2ad7ef7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The set of all <a class="el" href="class_c_block_index.html" title="The block chain is a tree shaped structure starting with the genesis block at the root...">CBlockIndex</a> entries with BLOCK_VALID_TRANSACTIONS (for itself and all ancestors) and as good as our current tip or better.  <a href="#a528c14be4a2a7c6837a2d099b2ad7ef7">More...</a><br /></td></tr>
<tr class="separator:a528c14be4a2a7c6837a2d099b2ad7ef7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e45b0fb23eacbbc2c0675f429d5c3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_critical_section.html">CCriticalSection</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#ad9e45b0fb23eacbbc2c0675f429d5c3b">cs_nBlockSequenceId</a></td></tr>
<tr class="memdesc:ad9e45b0fb23eacbbc2c0675f429d5c3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Every received block is assigned a unique and increasing identifier, so we know which one to give priority in case of a fork.  <a href="#ad9e45b0fb23eacbbc2c0675f429d5c3b">More...</a><br /></td></tr>
<tr class="separator:ad9e45b0fb23eacbbc2c0675f429d5c3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04c18ee587d1d516d12a193235eeb1cd"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a04c18ee587d1d516d12a193235eeb1cd">nBlockSequenceId</a> = 1</td></tr>
<tr class="memdesc:a04c18ee587d1d516d12a193235eeb1cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks loaded from disk are assigned id 0, so start the counter at 1.  <a href="#a04c18ee587d1d516d12a193235eeb1cd">More...</a><br /></td></tr>
<tr class="separator:a04c18ee587d1d516d12a193235eeb1cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4846ebb330ea7ad36adb058ba2b859"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#aaf4846ebb330ea7ad36adb058ba2b859">nBlockReverseSequenceId</a> = -1</td></tr>
<tr class="memdesc:aaf4846ebb330ea7ad36adb058ba2b859"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decreasing counter (used by subsequent preciousblock calls).  <a href="#aaf4846ebb330ea7ad36adb058ba2b859">More...</a><br /></td></tr>
<tr class="separator:aaf4846ebb330ea7ad36adb058ba2b859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b2d82dd158e9e50136417c0e672947"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classarith__uint256.html">arith_uint256</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a11b2d82dd158e9e50136417c0e672947">nLastPreciousChainwork</a> = 0</td></tr>
<tr class="memdesc:a11b2d82dd158e9e50136417c0e672947"><td class="mdescLeft">&#160;</td><td class="mdescRight">chainwork for the last block that preciousblock has been applied to.  <a href="#a11b2d82dd158e9e50136417c0e672947">More...</a><br /></td></tr>
<tr class="separator:a11b2d82dd158e9e50136417c0e672947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52c29388d6805442893089beaf96c4a7"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="class_c_block_index.html">CBlockIndex</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a52c29388d6805442893089beaf96c4a7">m_failed_blocks</a></td></tr>
<tr class="memdesc:a52c29388d6805442893089beaf96c4a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">In order to efficiently track invalidity of headers, we keep the set of blocks which we tried to connect and found to be invalid here (ie which were set to BLOCK_FAILED_VALID since the last restart).  <a href="#a52c29388d6805442893089beaf96c4a7">More...</a><br /></td></tr>
<tr class="separator:a52c29388d6805442893089beaf96c4a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de325123fd907fea8398fde92e5a6b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_c_critical_section.html">CCriticalSection</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_chain_state.html#a7de325123fd907fea8398fde92e5a6b1">m_cs_chainstate</a></td></tr>
<tr class="memdesc:a7de325123fd907fea8398fde92e5a6b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">the ChainState CriticalSection A lock that must be held when modifying this ChainState - held in <a class="el" href="class_c_chain_state.html#a5a24c6da53ff4b725e2d1c8b4af007fe" title="Make the best chain active, in multiple steps. ">ActivateBestChain()</a>  <a href="#a7de325123fd907fea8398fde92e5a6b1">More...</a><br /></td></tr>
<tr class="separator:a7de325123fd907fea8398fde92e5a6b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_c_chain_state.html" title="CChainState stores and provides an API to update our local knowledge of the current best chain and he...">CChainState</a> stores and provides an API to update our local knowledge of the current best chain and header tree. </p>
<p>It generally provides access to the current block tree, as well as functions to provide new data, which it will appropriately validate and incorporate in its state as necessary.</p>
<p>Eventually, the API here is targeted at being exposed externally as a consumable libconsensus library, so any functions added must only call other class member functions, pure functions in other parts of the consensus library, callbacks via the validation interface, or read/write-to-disk functions (eventually this will also be via callbacks). </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00107">107</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae4c089f033fefc9f5e10cda9af6a3a9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::AcceptBlock </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>pblock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> **&#160;</td>
          <td class="paramname"><em>ppindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fRequested</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c_disk_block_pos.html">CDiskBlockPos</a> *&#160;</td>
          <td class="paramname"><em>dbp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>fNewBlock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store block on disk. </p>
<p>If dbp is non-nullptr, the file is known to already reside on disk </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l03467">3467</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_ae4c089f033fefc9f5e10cda9af6a3a9a_cgraph.svg" width="971" height="2096"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_ae4c089f033fefc9f5e10cda9af6a3a9a_icgraph.svg" width="954" height="246"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a059db2048ce030760838426613dfc3e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::AcceptBlockHeader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_block_header.html">CBlockHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> **&#160;</td>
          <td class="paramname"><em>ppindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If a block header hasn't already been seen, call CheckBlockHeader on it, ensure that it doesn't descend from an invalid block, and then add it to mapBlockIndex. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l03365">3365</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a059db2048ce030760838426613dfc3e7_cgraph.svg" width="1182" height="1980"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a059db2048ce030760838426613dfc3e7_icgraph.svg" width="628" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5a24c6da53ff4b725e2d1c8b4af007fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::ActivateBestChain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt;&#160;</td>
          <td class="paramname"><em>pblock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make the best chain active, in multiple steps. </p>
<p>The result is either failure or an activated best chain. pblock is either nullptr or a pointer to a block that is already loaded (to avoid loading it again from disk).</p>
<p>ActivateBestChain is split into steps (see ActivateBestChainStep) so that we avoid holding cs_main for an extended period of time; the length of this call may be quite long during reindexing or a substantial reorg. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02678">2678</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a5a24c6da53ff4b725e2d1c8b4af007fe_cgraph.svg" width="1495" height="2144"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a5a24c6da53ff4b725e2d1c8b4af007fe_icgraph.svg" width="2404" height="2099"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a14d226df8dd7502d039f98b58f1534d4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::ActivateBestChainStep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindexMostWork</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>pblock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>fInvalidFound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;&#160;</td>
          <td class="paramname"><em>connectTrace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to make some progress towards making pindexMostWork the active block. </p>
<p>pblock is either nullptr or a pointer to a <a class="el" href="class_c_block.html">CBlock</a> corresponding to pindexMostWork. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02565">2565</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a14d226df8dd7502d039f98b58f1534d4_cgraph.svg" width="2020" height="1208"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac45520cdaf73168c6ae16ec81c166b5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_block_index.html">CBlockIndex</a> * CChainState::AddToBlockIndex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_block_header.html">CBlockHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02919">2919</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_ac45520cdaf73168c6ae16ec81c166b5b_cgraph.svg" width="2055" height="970"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a48cfb3ace8393f98f940b02876377f97"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CChainState::CheckBlockIndex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_consensus_1_1_params.html">Consensus::Params</a> &amp;&#160;</td>
          <td class="paramname"><em>consensusParams</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make various assertions about the state of the block index. </p>
<p>By default this only executes fully when using the Regtest chain; see: fCheckBlockIndex. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l04478">4478</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a48cfb3ace8393f98f940b02876377f97_cgraph.svg" width="474" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c0c017d41977fe6552ecfd1fc7c887d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::ConnectBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_block.html">CBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;&#160;</td>
          <td class="paramname"><em>view</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fJustCheck</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the effects of this block (with given index) on the UTXO set represented by coins. </p>
<p>Validity checks that depend on the UTXO set are also done; <a class="el" href="class_c_chain_state.html#a6c0c017d41977fe6552ecfd1fc7c887d" title="Apply the effects of this block (with given index) on the UTXO set represented by coins...">ConnectBlock()</a> can fail if those validity checks fail (among other reasons). </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l01823">1823</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a6c0c017d41977fe6552ecfd1fc7c887d_cgraph.svg" width="1230" height="2791"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a6c0c017d41977fe6552ecfd1fc7c887d_icgraph.svg" width="1204" height="206"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b8212270ad8b00cc1daad6f38623654"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::ConnectTip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindexNew</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; const <a class="el" href="class_c_block.html">CBlock</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>pblock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_connect_trace.html">ConnectTrace</a> &amp;&#160;</td>
          <td class="paramname"><em>connectTrace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> &amp;&#160;</td>
          <td class="paramname"><em>disconnectpool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connect a new block to chainActive. </p>
<p>pblock is either nullptr or a pointer to a <a class="el" href="class_c_block.html">CBlock</a> corresponding to pindexNew, to bypass loading it again from disk.</p>
<p>The block is added to connectTrace if connection succeeds. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02436">2436</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a7b8212270ad8b00cc1daad6f38623654_cgraph.svg" width="1172" height="1295"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a84c2802e12d40109c2189bfa8a5e0e8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="validation_8cpp.html#aeaef80b01ee5387f474a63ed23c9cc50">DisconnectResult</a> CChainState::DisconnectBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_block.html">CBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;&#160;</td>
          <td class="paramname"><em>view</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Undo the effects of this block (with given index) on the UTXO set represented by coins. </p>
<p>When FAILED is returned, view is left in an indeterminate state. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l01597">1597</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a84c2802e12d40109c2189bfa8a5e0e8f_cgraph.svg" width="1243" height="1599"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a84c2802e12d40109c2189bfa8a5e0e8f_icgraph.svg" width="954" height="62"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a57682556dc35715fba5f0c6075efcc6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::DisconnectTip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_disconnected_block_transactions.html">DisconnectedBlockTransactions</a> *&#160;</td>
          <td class="paramname"><em>disconnectpool</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect chainActive's tip. </p>
<p>After calling, the mempool will be in an inconsistent state, with transactions from disconnected blocks being added to disconnectpool. You should make the mempool consistent again by calling UpdateMempoolForReorg. with cs_main held.</p>
<p>If disconnectpool is nullptr, then no disconnected transactions are added to disconnectpool (note that the caller is responsible for mempool consistency in any case). </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02313">2313</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a57682556dc35715fba5f0c6075efcc6e_cgraph.svg" width="951" height="1234"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a88336990c447e935c05777f4b2cfb3ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_block_index.html">CBlockIndex</a> * CChainState::FindMostWorkChain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the tip of the chain with the most work in it, that isn't known to be invalid (it's however far from certain to be valid). </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02495">2495</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a88336990c447e935c05777f4b2cfb3ff_cgraph.svg" width="386" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec6306c9d32c3652dd68503e3ef838bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_block_index.html">CBlockIndex</a> * CChainState::InsertBlockIndex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classuint256.html">uint256</a> &amp;&#160;</td>
          <td class="paramname"><em>hash</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new block index entry for a given block hash. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l03807">3807</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_aec6306c9d32c3652dd68503e3ef838bc_cgraph.svg" width="368" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a656ebb0e37670a16714f0be1c572468b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::InvalidateBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02814">2814</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a656ebb0e37670a16714f0be1c572468b_cgraph.svg" width="668" height="240"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a656ebb0e37670a16714f0be1c572468b_icgraph.svg" width="1812" height="1710"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0087944413aa4c30c7ef1644a1ad9f3a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CChainState::InvalidBlockFound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l01327">1327</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a0087944413aa4c30c7ef1644a1ad9f3a_cgraph.svg" width="446" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3bd618dffc998e987d94f03d45353314"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::LoadBlockIndex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_consensus_1_1_params.html">Consensus::Params</a> &amp;&#160;</td>
          <td class="paramname"><em>consensus_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_tree_d_b.html">CBlockTreeDB</a> &amp;&#160;</td>
          <td class="paramname"><em>blocktree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l03827">3827</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a3bd618dffc998e987d94f03d45353314_cgraph.svg" width="1495" height="1279"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a3bd618dffc998e987d94f03d45353314_icgraph.svg" width="220" height="62"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6beb735dce3a8f0182660c04789df961"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::LoadGenesisBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>chainparams</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l04326">4326</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a6beb735dce3a8f0182660c04789df961_cgraph.svg" width="1655" height="1258"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a6beb735dce3a8f0182660c04789df961_icgraph.svg" width="672" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9e55c3c2a30535273288ae68fdfcac88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::PreciousBlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_validation_state.html">CValidationState</a> &amp;&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02782">2782</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a9e55c3c2a30535273288ae68fdfcac88_cgraph.svg" width="1931" height="2092"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a9e55c3c2a30535273288ae68fdfcac88_icgraph.svg" width="1799" height="1710"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c5ba911dca1f0d59781b9e63a607cd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CChainState::PruneBlockIndexCandidates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete all entries in setBlockIndexCandidates that are worse than the current tip. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02550">2550</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a6c5ba911dca1f0d59781b9e63a607cd6_cgraph.svg" width="367" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a6c5ba911dca1f0d59781b9e63a607cd6_icgraph.svg" width="524" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ada9f4af419d471de210cca765a36424e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CChainState::ReceivedBlockTransactions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_block.html">CBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindexNew</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_c_disk_block_pos.html">CDiskBlockPos</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_consensus_1_1_params.html">Consensus::Params</a> &amp;&#160;</td>
          <td class="paramname"><em>consensusParams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mark a block as having its data received and checked (up to BLOCK_VALID_TRANSACTIONS). </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02956">2956</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_ada9f4af419d471de210cca765a36424e_cgraph.svg" width="1180" height="1710"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a219bb793d4d3b0a095ccc47c45bc5b83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::ReplayBlocks </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_coins_view.html">CCoinsView</a> *&#160;</td>
          <td class="paramname"><em>view</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l04090">4090</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a219bb793d4d3b0a095ccc47c45bc5b83_cgraph.svg" width="1171" height="1244"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a219bb793d4d3b0a095ccc47c45bc5b83_icgraph.svg" width="499" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7ed855ca1761c2176651c8082aa9f529"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::ResetBlockFailureFlags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l02881">2881</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a7ed855ca1761c2176651c8082aa9f529_cgraph.svg" width="372" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a7ed855ca1761c2176651c8082aa9f529_icgraph.svg" width="1875" height="1710"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="afc0586502e4dd4092c4a0707d329f6eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::RewindBlockIndex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l04159">4159</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_afc0586502e4dd4092c4a0707d329f6eb_cgraph.svg" width="1386" height="1640"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_afc0586502e4dd4092c4a0707d329f6eb_icgraph.svg" width="634" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a6a93bf81626b263deef801883f7abc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CChainState::RollforwardBlock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_c_block_index.html">CBlockIndex</a> *&#160;</td>
          <td class="paramname"><em>pindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_c_coins_view_cache.html">CCoinsViewCache</a> &amp;&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_c_chain_params.html">CChainParams</a> &amp;&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Apply the effects of a block on the utxo cache, ignoring that it may already have been applied. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l04070">4070</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a8a6a93bf81626b263deef801883f7abc_cgraph.svg" width="1207" height="1254"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a807d9f23f63726267a1c62bf9c9eecef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CChainState::UnloadBlockIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l04269">4269</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_c_chain_state_a807d9f23f63726267a1c62bf9c9eecef_icgraph.svg" width="527" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a9b1419f91f5e56c7d4db775526c14e0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_chain.html">CChain</a> CChainState::chainActive</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00155">155</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad9e45b0fb23eacbbc2c0675f429d5c3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_critical_section.html">CCriticalSection</a> CChainState::cs_nBlockSequenceId</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Every received block is assigned a unique and increasing identifier, so we know which one to give priority in case of a fork. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00120">120</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7de325123fd907fea8398fde92e5a6b1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_critical_section.html">CCriticalSection</a> CChainState::m_cs_chainstate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the ChainState CriticalSection A lock that must be held when modifying this ChainState - held in <a class="el" href="class_c_chain_state.html#a5a24c6da53ff4b725e2d1c8b4af007fe" title="Make the best chain active, in multiple steps. ">ActivateBestChain()</a> </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00152">152</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a52c29388d6805442893089beaf96c4a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="class_c_block_index.html">CBlockIndex</a>*&gt; CChainState::m_failed_blocks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>In order to efficiently track invalidity of headers, we keep the set of blocks which we tried to connect and found to be invalid here (ie which were set to BLOCK_FAILED_VALID since the last restart). </p>
<p>We can then walk this set and check if a new header is a descendant of something in this set, preventing us from having to walk mapBlockIndex when we try to connect a bad block and fail.</p>
<p>While this is more complicated than marking everything which descends from an invalid block as invalid at the time we discover it to be invalid, doing so would require walking all of mapBlockIndex to find all descendants. Since this case should be very rare, keeping track of all BLOCK_FAILED_VALID blocks in a set should be just fine and work just as well.</p>
<p>Because we already walk mapBlockIndex in height-order at startup, we go ahead and mark descendants of invalid blocks as FAILED_CHILD at that time, instead of putting things in this set. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00146">146</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a95e2cf108ec02553707ae715b3acf0ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="validation_8h.html#a6b962fe256607627c8140021ae7a23e1">BlockMap</a> CChainState::mapBlockIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00156">156</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a318040c11336b79eddc71e1d3b176f2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::multimap&lt;<a class="el" href="class_c_block_index.html">CBlockIndex</a>*, <a class="el" href="class_c_block_index.html">CBlockIndex</a>*&gt; CChainState::mapBlocksUnlinked</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00157">157</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aaf4846ebb330ea7ad36adb058ba2b859"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t CChainState::nBlockReverseSequenceId = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decreasing counter (used by subsequent preciousblock calls). </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00124">124</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a04c18ee587d1d516d12a193235eeb1cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t CChainState::nBlockSequenceId = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Blocks loaded from disk are assigned id 0, so start the counter at 1. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00122">122</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a11b2d82dd158e9e50136417c0e672947"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classarith__uint256.html">arith_uint256</a> CChainState::nLastPreciousChainwork = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>chainwork for the last block that preciousblock has been applied to. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00126">126</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae0ae491f2e6b031587a5ad35fdafe546"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_c_block_index.html">CBlockIndex</a>* CChainState::pindexBestInvalid = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00158">158</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a528c14be4a2a7c6837a2d099b2ad7ef7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="class_c_block_index.html">CBlockIndex</a>*, CBlockIndexWorkComparator&gt; CChainState::setBlockIndexCandidates</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The set of all <a class="el" href="class_c_block_index.html" title="The block chain is a tree shaped structure starting with the genesis block at the root...">CBlockIndex</a> entries with BLOCK_VALID_TRANSACTIONS (for itself and all ancestors) and as good as our current tip or better. </p>
<p>Entries may be failed, though, and pruning nodes may be missing the data for the block. </p>

<p>Definition at line <a class="el" href="validation_8cpp_source.html#l00114">114</a> of file <a class="el" href="validation_8cpp_source.html">validation.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="validation_8cpp_source.html">validation.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 4 2018 13:35:41 for Bitcoin Core by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
